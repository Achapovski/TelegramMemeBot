[2025-04-20 17:53:49,561]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52146949 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer("Canceled")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 9, in answer
    await callback(answer.chat.id, answer.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-20 17:53:49,561]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52146949 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer("Canceled")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 9, in answer
    await callback(answer.chat.id, answer.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-20 17:54:10,022]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52146950 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer("Canceled")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 9, in answer
    await callback(answer.chat.id, answer.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-20 17:54:10,022]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52146950 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer("Canceled")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 9, in answer
    await callback(answer.chat.id, answer.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-20 17:55:37,740]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52146951 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer("Canceled")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 9, in answer
    await callback(answer.chat.id, answer.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-20 17:55:37,740]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52146951 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer("Canceled")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 9, in answer
    await callback(answer.chat.id, answer.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-20 19:12:59,956]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147019 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016BFE2B17F0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016BFE2B17F0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:12:59,956]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147019 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016BFE2B17F0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016BFE2B17F0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:12:59,996]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147018 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016B813C1FD0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016B813C1FD0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:12:59,996]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147018 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016B813C1FD0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000016B813C1FD0>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:13:30,258]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-04-20 19:13:30,258]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-04-20 19:13:38,392]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147020 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000015DD86DEF60>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000015DD86DEF60>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:13:38,392]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147020 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000015DD86DEF60>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=<fluentogram.src.impl.run...t at 0x0000015DD86DEF60>, input_type=TranslatorRunner]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:14:18,368]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147021 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:14:18,368]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147021 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:14:33,132]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147022 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:14:33,132]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147022 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 19, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:17:28,216]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147023 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:17:28,216]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147023 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:18:02,708]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147024 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:18:02,708]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147024 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 25, in cancel_process_handler
    await message.answer(i18n.message.text())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:18:51,245]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147025 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 26, in cancel_process_handler
    await message.answer(i18n.message())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-20 19:18:51,245]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147025 by bot id=8059818753
ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\handlers\default_mode.py", line 26, in cancel_process_handler
    await message.answer(i18n.message())
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\custom_types\messages.py", line 6, in answer
    answer = await super().answer(*args, **kwargs)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\types\message.py", line 2074, in answer
    return SendMessage(
           ^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for SendMessage
text
  Input should be a valid string [type=string_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/string_type
[2025-04-23 08:54:55,364]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147067 by bot id=8059818753
ConnectionError: Error 22 connecting to localhost:6379.      .
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 281, in connect
    await self.retry.call_with_retry(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 697, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1125, in create_connection
    raise exceptions[0]
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1102, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1005, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225]      

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    data.update({"state": context, "raw_state": await context.get_state()})
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\context.py", line 15, in get_state
    return await self.storage.get_state(key=self.key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 98, in get_state
    value = await self.redis.get(redis_key)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1064, in get_connection
    await self.ensure_connection(connection)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379.      .
[2025-04-23 08:54:55,364]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147067 by bot id=8059818753
ConnectionError: Error 22 connecting to localhost:6379.      .
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 281, in connect
    await self.retry.call_with_retry(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 697, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1125, in create_connection
    raise exceptions[0]
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1102, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1005, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225]      

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    data.update({"state": context, "raw_state": await context.get_state()})
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\context.py", line 15, in get_state
    return await self.storage.get_state(key=self.key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 98, in get_state
    value = await self.redis.get(redis_key)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1064, in get_connection
    await self.ensure_connection(connection)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379.      .
[2025-04-23 08:55:10,438]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147068 by bot id=8059818753
ConnectionError: Error 22 connecting to localhost:6379.      .
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 281, in connect
    await self.retry.call_with_retry(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 697, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1125, in create_connection
    raise exceptions[0]
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1102, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1005, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225]      

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    data.update({"state": context, "raw_state": await context.get_state()})
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\context.py", line 15, in get_state
    return await self.storage.get_state(key=self.key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 98, in get_state
    value = await self.redis.get(redis_key)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1064, in get_connection
    await self.ensure_connection(connection)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379.      .
[2025-04-23 08:55:10,438]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147068 by bot id=8059818753
ConnectionError: Error 22 connecting to localhost:6379.      .
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 281, in connect
    await self.retry.call_with_retry(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 697, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1125, in create_connection
    raise exceptions[0]
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1102, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1005, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225]      

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    data.update({"state": context, "raw_state": await context.get_state()})
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\context.py", line 15, in get_state
    return await self.storage.get_state(key=self.key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 98, in get_state
    value = await self.redis.get(redis_key)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1064, in get_connection
    await self.ensure_connection(connection)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379.      .
[2025-04-23 08:55:42,712]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147069 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:55:42,712]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147069 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:55:44,870]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147070 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:55:44,870]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147070 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:56:57,701]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147071 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:56:57,701]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147071 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:59:50,749]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147072 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 08:59:50,749]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147072 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:10:23,994]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147073 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:10:23,994]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147073 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:14:35,829]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147074 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:14:35,829]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147074 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:17:59,539]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147075 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:17:59,539]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147075 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:19:13,473]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147076 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:19:13,473]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147076 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:19:14,690]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147077 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:19:14,690]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147077 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:19:38,946]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147078 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:19:38,946]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147078 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:21:05,361]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147079 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:21:05,361]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147079 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:23:13,475]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147080 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:23:13,475]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147080 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:24:25,558]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147081 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:24:25,558]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147081 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 09:24:32,942]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147082 by bot id=8059818753
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
[2025-04-23 09:24:32,942]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147082 by bot id=8059818753
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
[2025-04-23 09:25:16,930]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147083 by bot id=8059818753
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
[2025-04-23 09:25:16,930]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147083 by bot id=8059818753
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() got an unexpected keyword argument 'bot'
[2025-04-23 09:25:58,067]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147084 by bot id=8059818753
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
[2025-04-23 09:25:58,067]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147084 by bot id=8059818753
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
[2025-04-23 17:41:21,002]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147085 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 17:41:21,002]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147085 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 17:42:12,107]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147086 by bot id=8059818753
KeyError: 'fsm_storage'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 269, in _load_default_context
    proxy=self.storage_proxy(event_context, data["fsm_storage"]),
                                            ~~~~^^^^^^^^^^^^^^^
KeyError: 'fsm_storage'
[2025-04-23 17:42:12,107]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147086 by bot id=8059818753
KeyError: 'fsm_storage'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 269, in _load_default_context
    proxy=self.storage_proxy(event_context, data["fsm_storage"]),
                                            ~~~~^^^^^^^^^^^^^^^
KeyError: 'fsm_storage'
[2025-04-23 17:43:14,657]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147087 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 17:43:14,657]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147087 by bot id=8059818753
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 203, in _load_context_by_stack
    stack = await self._load_stack(event, stack_id, proxy, data)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 189, in _load_stack
    return await proxy.load_stack(stack_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 76, in load_stack
    data = await self.storage.get_data(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 122, in get_data
    redis_key = self.key_builder.build(key, "data")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\base.py", line 96, in build
    raise ValueError(error_message)
ValueError: Default key builder is not configured to use key destiny other than the default.

Probably, you should set `with_destiny=True` in for DefaultKeyBuilder.
[2025-04-23 17:56:48,024]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147088 by bot id=8059818753
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
[2025-04-23 17:56:48,024]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147088 by bot id=8059818753
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 16, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.add_meme_object)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: send_meme_process_handler() missing 1 required positional argument: 'message'
[2025-04-23 18:11:27,103]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147089 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 19, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'bot'
[2025-04-23 18:11:27,103]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147089 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 19, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'bot'
[2025-04-23 18:11:55,444]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147090 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-23 18:11:55,444]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147090 by bot id=8059818753
ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 453, in _reader
    await self.close(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 141, in close
    await countdown(self.__closer(exc))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 96, in __call__
    return await asyncio.wait_for(coro, timeout=timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 131, in __closer
    await self._cancel_tasks(exc)
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\tasks.py", line 684, in _wrap_awaitable
    return await awaitable
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 46, in __inner
    raise self._exception from e
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    await channel.basic_publish(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 699, in basic_publish
    return await countdown(confirmation)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\tools.py", line 95, in __call__
    return await coro
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 441, in _reader
    await hook(frame)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\channel.py", line 410, in _on_close_frame
    raise exc
aiormq.exceptions.ChannelNotFoundEntity: NOT_FOUND - no exchange 'message_delete_exchanger' in vhost '/'
[2025-04-23 18:23:41,567]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147093 by bot id=8059818753
TypeError: 'NoneType' object does not support item assignment
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 23, in welcome_getter
    dialog_manager.start_data["i18n"] = i18n
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
TypeError: 'NoneType' object does not support item assignment
[2025-04-23 18:23:41,567]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147093 by bot id=8059818753
TypeError: 'NoneType' object does not support item assignment
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 23, in welcome_getter
    dialog_manager.start_data["i18n"] = i18n
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
TypeError: 'NoneType' object does not support item assignment
[2025-04-23 18:24:53,219]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147094 by bot id=8059818753
TypeError: 'NoneType' object does not support item assignment
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 25, in welcome_getter
    dialog_manager.start_data["i18n"] = i18n
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
TypeError: 'NoneType' object does not support item assignment
[2025-04-23 18:24:53,219]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147094 by bot id=8059818753
TypeError: 'NoneType' object does not support item assignment
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 25, in welcome_getter
    dialog_manager.start_data["i18n"] = i18n
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^
TypeError: 'NoneType' object does not support item assignment
[2025-04-23 18:42:18,504]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147095 by bot id=8059818753
TypeError: Object of type TranslatorRunner is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type TranslatorRunner is not JSON serializable
[2025-04-23 18:42:18,504]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147095 by bot id=8059818753
TypeError: Object of type TranslatorRunner is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type TranslatorRunner is not JSON serializable
[2025-04-23 18:46:04,731]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147097 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start, data={"i18n": i18n})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
[2025-04-23 18:46:04,731]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147097 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start, data={"i18n": i18n})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
[2025-04-23 18:46:17,623]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147098 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
[2025-04-23 18:46:17,623]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147098 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
[2025-04-23 18:46:55,133]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147099 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
[2025-04-23 18:46:55,133]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147099 by bot id=8059818753
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: welcome_getter() got an unexpected keyword argument 'dialog_manager'
[2025-04-23 18:58:22,687]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147102 by bot id=8059818753
UnregisteredWindowError: No window found for `<State 'WorkingDialogStates:first_start'>` Current state group is `WorkingDialogStates`
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'WorkingDialogStates:first_start'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 25, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'WorkingDialogStates:first_start'>` Current state group is `WorkingDialogStates`
[2025-04-23 18:58:22,687]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147102 by bot id=8059818753
UnregisteredWindowError: No window found for `<State 'WorkingDialogStates:first_start'>` Current state group is `WorkingDialogStates`
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 106, in _current_window
    return self.windows[manager.current_context().state]
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
KeyError: <State 'WorkingDialogStates:first_start'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 25, in welcome_getter
    await dialog_manager.start(WorkingDialogStates.first_start)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 122, in render
    window = await self._current_window(manager)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 108, in _current_window
    raise UnregisteredWindowError(
aiogram_dialog.api.exceptions.UnregisteredWindowError: No window found for `<State 'WorkingDialogStates:first_start'>` Current state group is `WorkingDialogStates`
[2025-04-23 18:59:13,024]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147105 by bot id=8059818753
TypeError: meme_title_getter() missing 1 required positional argument: 'message'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: meme_title_getter() missing 1 required positional argument: 'message'
[2025-04-23 18:59:13,024]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147105 by bot id=8059818753
TypeError: meme_title_getter() missing 1 required positional argument: 'message'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: meme_title_getter() missing 1 required positional argument: 'message'
[2025-04-25 18:20:04,564]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147195 by bot id=8059818753
ConnectionError: Error 22 connecting to localhost:6379.      .
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 281, in connect
    await self.retry.call_with_retry(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 697, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1125, in create_connection
    raise exceptions[0]
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1102, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1005, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225]      

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    data.update({"state": context, "raw_state": await context.get_state()})
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\context.py", line 15, in get_state
    return await self.storage.get_state(key=self.key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 98, in get_state
    value = await self.redis.get(redis_key)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1064, in get_connection
    await self.ensure_connection(connection)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379.      .
[2025-04-25 18:20:04,564]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147195 by bot id=8059818753
ConnectionError: Error 22 connecting to localhost:6379.      .
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 281, in connect
    await self.retry.call_with_retry(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 697, in _connect
    reader, writer = await asyncio.open_connection(
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 48, in open_connection
    transport, _ = await loop.create_connection(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1125, in create_connection
    raise exceptions[0]
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1102, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 1005, in _connect_sock
    await self.sock_connect(sock, address)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\proactor_events.py", line 727, in sock_connect
    return await self._proactor.connect(sock, address)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 798, in _poll
    value = callback(transferred, key, ov)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\windows_events.py", line 594, in finish_connect
    ov.getresult()
ConnectionRefusedError: [WinError 1225]      

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 41, in __call__
    data.update({"state": context, "raw_state": await context.get_state()})
                                                ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\context.py", line 15, in get_state
    return await self.storage.get_state(key=self.key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 98, in get_state
    value = await self.redis.get(redis_key)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 611, in execute_command
    conn = self.connection or await pool.get_connection(command_name, **options)
                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1064, in get_connection
    await self.ensure_connection(connection)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 1097, in ensure_connection
    await connection.connect()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 289, in connect
    raise ConnectionError(self._error_message(e))
redis.exceptions.ConnectionError: Error 22 connecting to localhost:6379.      .
[2025-04-25 18:25:06,331]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147211 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:25:06,331]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147211 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:25:18,287]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147213 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:25:18,287]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147213 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:26:05,515]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147215 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:26:05,515]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147215 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:26:22,364]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147218 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:26:22,364]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147218 by bot id=8059818753
TypeError: 'NoneType' object is not iterable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 137, in _message_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
TypeError: 'NoneType' object is not iterable
[2025-04-25 18:43:51,893]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147245 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 35, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-04-25 18:43:51,893]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147245 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 35, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-04-25 18:44:09,336]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147249 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 35, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-04-25 18:44:09,336]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147249 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 35, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-04-25 18:50:06,107]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-04-25 18:50:06,107]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-04-25 19:04:36,571]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 64]     
[2025-04-25 19:04:36,571]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [WinError 64]     
[2025-04-25 20:19:05,639]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147449 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:19:05,639]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147449 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:19:06,508]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147450 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:19:06,508]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147450 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:25:42,652]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147451 by bot id=8059818753
UnknownState: Unknown state WorkingDialogStates:edit_settings
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 210, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 63, in load_context
    data["state"] = self._state(data["state"])
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 171, in _state
    raise UnknownState(f"Unknown state {state}")
aiogram_dialog.api.exceptions.UnknownState: Unknown state WorkingDialogStates:edit_settings
[2025-04-25 20:25:42,652]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147451 by bot id=8059818753
UnknownState: Unknown state WorkingDialogStates:edit_settings
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 330, in process_message
    await self._load_default_context(event, data, event_context)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 267, in _load_default_context
    return await self._load_context_by_stack(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 210, in _load_context_by_stack
    context = await proxy.load_context(stack.last_intent_id())
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 63, in load_context
    data["state"] = self._state(data["state"])
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 171, in _state
    raise UnknownState(f"Unknown state {state}")
aiogram_dialog.api.exceptions.UnknownState: Unknown state WorkingDialogStates:edit_settings
[2025-04-25 20:26:46,682]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147452 by bot id=8059818753
NoContextError: 
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 28, in settings_process_handler
    print(dialog_manager.current_context().state)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 151, in current_context
    raise NoContextError
aiogram_dialog.api.exceptions.NoContextError
[2025-04-25 20:26:46,682]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147452 by bot id=8059818753
NoContextError: 
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 28, in settings_process_handler
    print(dialog_manager.current_context().state)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 151, in current_context
    raise NoContextError
aiogram_dialog.api.exceptions.NoContextError
[2025-04-25 20:27:16,837]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147453 by bot id=8059818753
UnregisteredDialogError: No dialog found for `<StatesGroup 'SettingsStates'>` (looking by state `<State 'SettingsStates:edit_settings'>`)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 66, in find_dialog
    return self._dialogs[state.group]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: <class 'dialogs.dialog_states.SettingsStates'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 28, in settings_process_handler
    await dialog_manager.start(SettingsStates.edit_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 287, in _start_normal
    new_dialog = self._registry.find_dialog(state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 68, in find_dialog
    raise UnregisteredDialogError(
aiogram_dialog.api.exceptions.UnregisteredDialogError: No dialog found for `<StatesGroup 'SettingsStates'>` (looking by state `<State 'SettingsStates:edit_settings'>`)
[2025-04-25 20:27:16,837]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147453 by bot id=8059818753
UnregisteredDialogError: No dialog found for `<StatesGroup 'SettingsStates'>` (looking by state `<State 'SettingsStates:edit_settings'>`)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 66, in find_dialog
    return self._dialogs[state.group]
           ~~~~~~~~~~~~~^^^^^^^^^^^^^
KeyError: <class 'dialogs.dialog_states.SettingsStates'>

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 28, in settings_process_handler
    await dialog_manager.start(SettingsStates.edit_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 287, in _start_normal
    new_dialog = self._registry.find_dialog(state)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\setup.py", line 68, in find_dialog
    raise UnregisteredDialogError(
aiogram_dialog.api.exceptions.UnregisteredDialogError: No dialog found for `<StatesGroup 'SettingsStates'>` (looking by state `<State 'SettingsStates:edit_settings'>`)
[2025-04-25 20:37:02,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147458 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:37:02,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147458 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:37:32,960]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147460 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 20:37:32,960]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147460 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
[2025-04-25 21:05:59,232]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147491 by bot id=8059818753
TypeError: Object of type Format is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Format is not JSON serializable
[2025-04-25 21:05:59,232]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147491 by bot id=8059818753
TypeError: Object of type Format is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type Format is not JSON serializable
[2025-04-25 21:08:48,926]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147493 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:08:48,926]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147493 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:15:54,931]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147500 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'get_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 47, in dialogs_getter
    if not data.get_checked():
           ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_checked'
[2025-04-25 21:15:54,931]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147500 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'get_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 47, in dialogs_getter
    if not data.get_checked():
           ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_checked'
[2025-04-25 21:16:31,033]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147502 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:16:31,033]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147502 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:45:15,059]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147504 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:45:15,059]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147504 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:45:19,854]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147506 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:45:19,854]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147506 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:00,028]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147509 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:00,028]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147509 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:01,173]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147510 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:01,173]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147510 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:02,638]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147511 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:02,638]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147511 by bot id=8059818753
TypeError: Object of type ManagedRadio is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type ManagedRadio is not JSON serializable
[2025-04-25 21:46:40,237]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147513 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'set_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 48, in dialogs_getter
    await data.set_checked(data := DialogsTypeEnum.aiogram_dialog.value)
          ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'set_checked'
[2025-04-25 21:46:40,237]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147513 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'set_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 48, in dialogs_getter
    await data.set_checked(data := DialogsTypeEnum.aiogram_dialog.value)
          ^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'set_checked'
[2025-04-25 21:53:32,483]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147520 by bot id=8059818753
TypeError: Object of type type is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type type is not JSON serializable
[2025-04-25 21:53:32,483]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147520 by bot id=8059818753
TypeError: Object of type type is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type type is not JSON serializable
[2025-04-25 21:53:33,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147521 by bot id=8059818753
UnknownIntent: Context not found for intent id: v2anu6
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: v2anu6
[2025-04-25 21:53:33,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147521 by bot id=8059818753
UnknownIntent: Context not found for intent id: v2anu6
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: v2anu6
[2025-04-25 21:54:32,648]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147523 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 54, in dialogs_getter
    return {"message": i18n.settings.dialog_type, "dialogs": dialogs}
                       ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'settings'
[2025-04-25 21:54:32,648]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147523 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 54, in dialogs_getter
    return {"message": i18n.settings.dialog_type, "dialogs": dialogs}
                       ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'settings'
[2025-04-25 21:57:34,124]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147531 by bot id=8059818753
AttributeError: 'Update' object has no attribute 'from_user'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 17, in __call__
    data["i18n"] = translator.get_translator_by_locale(event.from_user.language_code)
                                                       ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Update' object has no attribute 'from_user'
[2025-04-25 21:57:34,124]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147531 by bot id=8059818753
AttributeError: 'Update' object has no attribute 'from_user'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 17, in __call__
    data["i18n"] = translator.get_translator_by_locale(event.from_user.language_code)
                                                       ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Update' object has no attribute 'from_user'
[2025-04-25 22:03:21,704]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147535 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 54, in dialogs_getter
    return {"message": i18n.settings.dialog_type, "dialogs": dialogs}
                       ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'settings'
[2025-04-25 22:03:21,704]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147535 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 54, in dialogs_getter
    return {"message": i18n.settings.dialog_type, "dialogs": dialogs}
                       ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'settings'
[2025-04-25 22:25:10,762]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147543 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Input should be <LocalesEnum.ru: 'ru-RU'> or <LocalesEnum.en: 'en-US'> [type=literal_error, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
dialog
  Input should be <DialogsTypeEnum.aiogram_dialog: 'Aiogram Dialogs'> or <DialogsTypeEnum.default_state: 'FSM Context'> [type=literal_error, input_value='default_state', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 32, in settings_process_handler
    user_settings = UserSettingsScheme(language="ru", dialog="default_state")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Input should be <LocalesEnum.ru: 'ru-RU'> or <LocalesEnum.en: 'en-US'> [type=literal_error, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
dialog
  Input should be <DialogsTypeEnum.aiogram_dialog: 'Aiogram Dialogs'> or <DialogsTypeEnum.default_state: 'FSM Context'> [type=literal_error, input_value='default_state', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
[2025-04-25 22:25:10,762]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147543 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Input should be <LocalesEnum.ru: 'ru-RU'> or <LocalesEnum.en: 'en-US'> [type=literal_error, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
dialog
  Input should be <DialogsTypeEnum.aiogram_dialog: 'Aiogram Dialogs'> or <DialogsTypeEnum.default_state: 'FSM Context'> [type=literal_error, input_value='default_state', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 32, in settings_process_handler
    user_settings = UserSettingsScheme(language="ru", dialog="default_state")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Input should be <LocalesEnum.ru: 'ru-RU'> or <LocalesEnum.en: 'en-US'> [type=literal_error, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
dialog
  Input should be <DialogsTypeEnum.aiogram_dialog: 'Aiogram Dialogs'> or <DialogsTypeEnum.default_state: 'FSM Context'> [type=literal_error, input_value='default_state', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/literal_error
[2025-04-25 22:28:59,582]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147544 by bot id=8059818753
TypeError: Object of type UserSettingsScheme is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UserSettingsScheme is not JSON serializable
[2025-04-25 22:28:59,582]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147544 by bot id=8059818753
TypeError: Object of type UserSettingsScheme is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UserSettingsScheme is not JSON serializable
[2025-04-25 22:34:48,352]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147545 by bot id=8059818753
TypeError: Object of type UserSettingsScheme is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UserSettingsScheme is not JSON serializable
[2025-04-25 22:34:48,352]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147545 by bot id=8059818753
TypeError: Object of type UserSettingsScheme is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UserSettingsScheme is not JSON serializable
[2025-04-25 22:35:25,207]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147546 by bot id=8059818753
TypeError: ValidationError.__new__() missing 1 required positional argument: 'line_errors'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 33, in settings_process_handler
    user_settings = UserSettingsScheme(language="ru", dialog="default_state")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_types.py", line 24, in validate_dialog
    raise ValidationError("Field 'dialog' should be one of 'DialogsTypeEnum'")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ValidationError.__new__() missing 1 required positional argument: 'line_errors'
[2025-04-25 22:35:25,207]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147546 by bot id=8059818753
TypeError: ValidationError.__new__() missing 1 required positional argument: 'line_errors'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 33, in settings_process_handler
    user_settings = UserSettingsScheme(language="ru", dialog="default_state")
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_types.py", line 24, in validate_dialog
    raise ValidationError("Field 'dialog' should be one of 'DialogsTypeEnum'")
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: ValidationError.__new__() missing 1 required positional argument: 'line_errors'
[2025-04-25 22:38:02,107]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147547 by bot id=8059818753
TypeError: Object of type UserSettingsScheme is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UserSettingsScheme is not JSON serializable
[2025-04-25 22:38:02,107]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147547 by bot id=8059818753
TypeError: Object of type UserSettingsScheme is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 429, in context_saver_middleware
    await proxy.save_context(data.pop(CONTEXT_KEY))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 91, in save_context
    await self.storage.set_data(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\storage\redis.py", line 114, in set_data
    self.json_dumps(data),
    ^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 231, in dumps
    return _default_encoder.encode(obj)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           ^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type UserSettingsScheme is not JSON serializable
[2025-04-25 22:38:05,381]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147548 by bot id=8059818753
UnknownIntent: Context not found for intent id: NU2WY9
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: NU2WY9
[2025-04-25 22:38:05,381]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147548 by bot id=8059818753
UnknownIntent: Context not found for intent id: NU2WY9
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: NU2WY9
[2025-04-27 10:56:05,508]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147584 by bot id=8059818753
TypeError: UserRepository.__init__() missing 1 required positional argument: 'user_settings_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 38, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=settings, model=User)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() missing 1 required positional argument: 'user_settings_repo'
[2025-04-27 10:56:05,508]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147584 by bot id=8059818753
TypeError: UserRepository.__init__() missing 1 required positional argument: 'user_settings_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 38, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=settings, model=User)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() missing 1 required positional argument: 'user_settings_repo'
[2025-04-27 10:58:46,403]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147588 by bot id=8059818753
TypeError: sqlalchemy.sql.dml.ValuesBase.values() argument after ** must be a mapping, not UserCreateScheme
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 26, in add_user
    insert(self.model).values(**UserCreateScheme(id=user_id)).on_conflict_do_nothing().returning(self.model)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: sqlalchemy.sql.dml.ValuesBase.values() argument after ** must be a mapping, not UserCreateScheme
[2025-04-27 10:58:46,403]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147588 by bot id=8059818753
TypeError: sqlalchemy.sql.dml.ValuesBase.values() argument after ** must be a mapping, not UserCreateScheme
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 26, in add_user
    insert(self.model).values(**UserCreateScheme(id=user_id)).on_conflict_do_nothing().returning(self.model)
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: sqlalchemy.sql.dml.ValuesBase.values() argument after ** must be a mapping, not UserCreateScheme
[2025-04-27 10:59:42,721]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147589 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 10:59:42,721]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147589 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:09:48,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147590 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:09:48,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147590 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:11:07,474]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147591 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:11:07,474]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147591 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:14:36,233]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147592 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:14:36,233]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147592 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'Settings' failed to locate a name ('Settings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:16:23,638]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147593 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'models.user_settings.Settings' failed to locate a name ("Module 'user_settings' has no mapped classes registered under the name 'Settings'"). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 518, in _resolve_name
    rval = getattr(rval, token)
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 350, in __getattr__
    raise NameError(
NameError: Module 'user_settings' has no mapped classes registered under the name 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 522, in _resolve_name
    self._raise_for_name(n.args[0], n)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'models.user_settings.Settings' failed to locate a name ("Module 'user_settings' has no mapped classes registered under the name 'Settings'"). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:16:23,638]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147593 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'models.user_settings.Settings' failed to locate a name ("Module 'user_settings' has no mapped classes registered under the name 'Settings'"). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 518, in _resolve_name
    rval = getattr(rval, token)
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 350, in __getattr__
    raise NameError(
NameError: Module 'user_settings' has no mapped classes registered under the name 'Settings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 522, in _resolve_name
    self._raise_for_name(n.args[0], n)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'models.user_settings.Settings' failed to locate a name ("Module 'user_settings' has no mapped classes registered under the name 'Settings'"). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:16:53,195]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147594 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[UserSetting(user_settings)], expression 'models.User' failed to locate a name ("Module 'models' has no mapped classes registered under the name 'User'"). If this is a class name, consider adding this relationship() to the <class 'models.user_settings.UserSetting'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 518, in _resolve_name
    rval = getattr(rval, token)
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 350, in __getattr__
    raise NameError(
NameError: Module 'models' has no mapped classes registered under the name 'User'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 522, in _resolve_name
    self._raise_for_name(n.args[0], n)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[UserSetting(user_settings)], expression 'models.User' failed to locate a name ("Module 'models' has no mapped classes registered under the name 'User'"). If this is a class name, consider adding this relationship() to the <class 'models.user_settings.UserSetting'> class after both dependent classes have been defined.
[2025-04-27 11:16:53,195]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147594 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[UserSetting(user_settings)], expression 'models.User' failed to locate a name ("Module 'models' has no mapped classes registered under the name 'User'"). If this is a class name, consider adding this relationship() to the <class 'models.user_settings.UserSetting'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 518, in _resolve_name
    rval = getattr(rval, token)
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 350, in __getattr__
    raise NameError(
NameError: Module 'models' has no mapped classes registered under the name 'User'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1656, in do_init
    self._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 522, in _resolve_name
    self._raise_for_name(n.args[0], n)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[UserSetting(user_settings)], expression 'models.User' failed to locate a name ("Module 'models' has no mapped classes registered under the name 'User'"). If this is a class name, consider adding this relationship() to the <class 'models.user_settings.UserSetting'> class after both dependent classes have been defined.
[2025-04-27 11:17:35,813]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147595 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'UserSettings' failed to locate a name ('UserSettings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'UserSettings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'UserSettings' failed to locate a name ('UserSettings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:17:35,813]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147595 by bot id=8059818753
InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'UserSettings' failed to locate a name ('UserSettings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           ~^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
                      ^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           ~~~~~~~~~~~~~^^^^^
KeyError: 'UserSettings'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 25, in add_user
    db_user = await self.db_session.execute(
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1294, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1630, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 724, in _compile_w_cache
    compiled_sql = self._compiler(
                   ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1429, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 870, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 915, in process
    return obj._compiler_dispatch(self, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\annotation.py", line 344, in _compiler_dispatch
    return self.__element.__class__._compiler_dispatch(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 5759, in visit_insert
    compile_state = insert_stmt._compile_state_factory(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\base.py", line 686, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1340, in create_for_statement
    self._setup_for_orm_insert(compiler, mapper)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 1356, in _setup_for_orm_insert
    statement = self._setup_orm_returning(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\bulk_persistence.py", line 561, in _setup_orm_returning
    ORMFromStatementCompileState.create_for_statement(fs, compiler)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 832, in _create_orm_context
    _QueryEntity.to_compile_state(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2630, in to_compile_state
    _MapperEntity(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2710, in __init__
    entity._post_inspect
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1257, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1661, in do_init
    self._generate_backref()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2147, in _generate_backref
    self._add_reverse_property(self.back_populates)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1613, in _add_reverse_property
    other._setup_entity()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1868, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[User(users)], expression 'UserSettings' failed to locate a name ('UserSettings'). If this is a class name, consider adding this relationship() to the <class 'models.users.User'> class after both dependent classes have been defined.
[2025-04-27 11:18:04,325]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147596 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsCreateScheme
language_locale
  Input should be 'ru-RU' or 'en-US' [type=enum, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/enum
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 34, in add_user
    await self.user_settings_repo.add_user_settings(user_id=user_id, language=language)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\user_settings.py", line 26, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsCreateScheme
language_locale
  Input should be 'ru-RU' or 'en-US' [type=enum, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/enum
[2025-04-27 11:18:04,325]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147596 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsCreateScheme
language_locale
  Input should be 'ru-RU' or 'en-US' [type=enum, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/enum
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 20, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language).name)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 34, in add_user
    await self.user_settings_repo.add_user_settings(user_id=user_id, language=language)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\user_settings.py", line 26, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsCreateScheme
language_locale
  Input should be 'ru-RU' or 'en-US' [type=enum, input_value='ru', input_type=str]
    For further information visit https://errors.pydantic.dev/2.10/v/enum
[2025-04-27 11:58:35,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147627 by bot id=8059818753
NoContextError: 
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 19, in welcome_getter
    if dialog_manager.current_context():
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 151, in current_context
    raise NoContextError
aiogram_dialog.api.exceptions.NoContextError
[2025-04-27 11:58:35,774]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147627 by bot id=8059818753
NoContextError: 
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 19, in welcome_getter
    if dialog_manager.current_context():
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 151, in current_context
    raise NoContextError
aiogram_dialog.api.exceptions.NoContextError
[2025-04-27 11:59:27,160]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147628 by bot id=8059818753
NoContextError: 
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 19, in welcome_getter
    print(dialog_manager.current_context())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 151, in current_context
    raise NoContextError
aiogram_dialog.api.exceptions.NoContextError
[2025-04-27 11:59:27,160]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147628 by bot id=8059818753
NoContextError: 
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 19, in welcome_getter
    print(dialog_manager.current_context())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 151, in current_context
    raise NoContextError
aiogram_dialog.api.exceptions.NoContextError
[2025-04-27 12:10:29,067]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147648 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(user.settings)
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:10:29,067]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147648 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(user.settings)
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:17:38,346]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147649 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(await user.settings)
                ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:17:38,346]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147649 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(await user.settings)
                ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:18:35,739]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147650 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(id=user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
[2025-04-27 12:18:35,739]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147650 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(id=user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
[2025-04-27 12:19:50,318]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147651 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(user.settings)
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:19:50,318]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147651 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(user.settings)
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:21:28,371]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147652 by bot id=8059818753
ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-04-27 12:21:28,371]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147652 by bot id=8059818753
ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-04-27 12:22:00,433]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147653 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(user.settings.info)
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:22:00,433]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147653 by bot id=8059818753
MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(user.settings.info)
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 566, in __get__
    return self.impl.get(state, dict_)  # type: ignore[no-any-return]
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1086, in get
    value = self._fire_loader_callables(state, key, passive)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\attributes.py", line 1121, in _fire_loader_callables
    return self.callable_(state, passive)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 978, in _load_for_state
    return self._emit_lazyload(
           ^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\strategies.py", line 1141, in _emit_lazyload
    result = session.execute(
             ^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
             ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1416, in execute
    return meth(
           ^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1843, in _execute_context
    return self._exec_single_context(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2355, in _handle_dbapi_exception
    raise exc_info[1].with_traceback(exc_info[2])
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\dialects\postgresql\asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 123, in await_only
    raise exc.MissingGreenlet(
sqlalchemy.exc.MissingGreenlet: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s)
[2025-04-27 12:25:20,348]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147654 by bot id=8059818753
ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-04-27 12:25:20,348]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147654 by bot id=8059818753
ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(await usr_repo.get_user(user_id=message.from_user.id))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(user_id)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserDTO
  Input should be a valid dictionary or instance of UserDTO [type=model_type, input_value=786676939, input_type=int]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-04-27 12:27:33,861]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147655 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:27:33,861]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147655 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001945C8FFFE0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:28:47,964]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147656 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:28:47,964]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147656 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A0AC540080>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:31:34,274]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147657 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:31:34,274]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147657 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000020804C6FE60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:33:01,623]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147658 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:33:01,623]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147658 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x0000012391540200>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:33:47,369]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147659 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:33:47,369]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147659 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x00000140C91F4B60>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:35:52,248]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147660 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 47, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:35:52,248]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147660 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 47, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001B9CD264AA0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:38:08,708]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147661 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:38:08,708]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147661 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 45, in get_user
    print(UserSettingsScheme.model_validate(user.settings, from_attributes=True))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001BD7B65F7A0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 12:39:23,216]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147662 by bot id=8059818753
InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(db_user.all()[0])
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1377, in all
    return self._allrows()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 565, in _allrows
    strategy(made_row) if strategy else made_row,
    ^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 285, in require_unique
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
[2025-04-27 12:39:23,216]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147662 by bot id=8059818753
InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(db_user.all()[0])
          ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1377, in all
    return self._allrows()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 565, in _allrows
    strategy(made_row) if strategy else made_row,
    ^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 285, in require_unique
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
[2025-04-27 12:39:42,384]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147663 by bot id=8059818753
InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(db_user.scalars().all())
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1767, in all
    return self._allrows()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 565, in _allrows
    strategy(made_row) if strategy else made_row,
    ^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 285, in require_unique
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
[2025-04-27 12:39:42,384]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147663 by bot id=8059818753
InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 44, in get_user
    print(db_user.scalars().all())
          ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 1767, in all
    return self._allrows()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\engine\result.py", line 565, in _allrows
    strategy(made_row) if strategy else made_row,
    ^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\orm\loading.py", line 285, in require_unique
    raise sa_exc.InvalidRequestError(
sqlalchemy.exc.InvalidRequestError: The unique() method must be invoked on this Result, as it contains results that include joined eager loads against collections
[2025-04-27 13:57:40,456]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-27 13:57:40,456]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-27 13:58:30,965]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147664 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 46, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 13:58:30,965]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147664 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 46, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000002A2FCD4F650>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:01:56,935]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147665 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 47, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:01:56,935]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147665 by bot id=8059818753
ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 36, in settings_process_handler
    print(user := await usr_repo.get_user(user_id=message.from_user.id))
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 47, in get_user
    return UserDTO.model_validate(user, from_attributes=True)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserDTO
settings.id
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
settings.language_locale
  Field required [type=missing, input_value=[<models.user_settings.Us... at 0x000001A95622F6B0>], input_type=InstrumentedList]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:10:24,607]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147670 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 39, in languages_getter
    settings = UserSettingsScheme(**dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:10:24,607]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147670 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 39, in languages_getter
    settings = UserSettingsScheme(**dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:13:20,685]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147671 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme(**user.settings.model_dump()).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:13:20,685]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147671 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme(**user.settings.model_dump()).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog
  Field required [type=missing, input_value={'id': 786676939, 'langua...type': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:14:03,285]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147672 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump()).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
[2025-04-27 14:14:03,285]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147672 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump()).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
[2025-04-27 14:17:47,219]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147673 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump(exclude={"id"})).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:17:47,219]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147673 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump(exclude={"id"})).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:18:39,873]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147674 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump(exclude={"id"})).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:18:39,873]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147674 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump(exclude={"id"})).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:20:33,424]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147675 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump()).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
[2025-04-27 14:20:33,424]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147675 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 40, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump()).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'id'
[2025-04-27 14:22:11,804]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147676 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump(exclude={"id"})).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:22:11,804]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147676 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(**user.settings.model_dump(exclude={"id"})).model_dump()
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:25:08,521]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147677 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 41, in settings_process_handler
    print(UserSettingsScheme.model_validate(**data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:25:08,521]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147677 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 41, in settings_process_handler
    print(UserSettingsScheme.model_validate(**data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:27:33,526]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147678 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    print(UserSettingsScheme.model_validate(**data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:27:33,526]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147678 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    print(UserSettingsScheme.model_validate(**data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:27:57,235]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147679 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    print(UserSettingsScheme.model_validate(**data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:27:57,235]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147679 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    print(UserSettingsScheme.model_validate(**data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:28:13,533]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147680 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    print(UserSettingsScheme.model_validate(data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:28:13,533]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147680 by bot id=8059818753
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 42, in settings_process_handler
    print(UserSettingsScheme.model_validate(data))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: BaseModel.model_validate() got an unexpected keyword argument 'language_locale'
[2025-04-27 14:29:29,668]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147683 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 39, in languages_getter
    settings = UserSettingsScheme(**dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:29:29,668]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147683 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 39, in languages_getter
    settings = UserSettingsScheme(**dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:30:37,071]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147685 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 39, in languages_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:30:37,071]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147685 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 39, in languages_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:32:19,740]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147686 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 54, in dialogs_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:32:19,740]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147686 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 54, in dialogs_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:32:43,410]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147688 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 55, in dialogs_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:32:43,410]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147688 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 55, in dialogs_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:34:53,643]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147690 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 55, in dialogs_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:34:53,643]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147690 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 55, in dialogs_getter
    settings = UserSettingsScheme.model_validate(dialog_manager.start_data.get("user_settings"))
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
dialog_type
  Field required [type=missing, input_value={'language': 'ru', 'dialog': 'aiogram_dialog'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.10/v/missing
[2025-04-27 14:51:47,281]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-27 14:51:47,281]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-27 14:51:48,301]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:48,301]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:49,503]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:49,503]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:51,175]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:51,175]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:53,456]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:53,456]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:56,343]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:51:56,343]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:00,198]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:00,198]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:05,157]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:05,157]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:10,020]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:10,020]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:15,177]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:15,177]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:20,105]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:20,105]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:25,036]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:25,036]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:29,969]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:29,969]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:35,056]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:35,056]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:40,096]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:40,096]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:45,178]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:45,178]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:50,084]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:50,084]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:55,291]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:52:55,291]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:00,339]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:00,339]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:05,338]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:05,338]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:10,539]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:10,539]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:15,552]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:15,552]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:41,579]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  ]
[2025-04-27 14:53:41,579]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  ]
[2025-04-27 14:53:50,113]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [      ]
[2025-04-27 14:53:50,113]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [      ]
[2025-04-27 14:53:55,171]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:53:55,171]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-27 14:56:06,284]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-27 14:56:06,284]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-27 15:42:52,412]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147727 by bot id=8059818753
AttributeError: 'dict' object has no attribute 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 24, in confirm_btn_click
    await cache.to_cache("language_locale", user_settings.language_locale)
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'language_locale'
[2025-04-27 15:42:52,412]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147727 by bot id=8059818753
AttributeError: 'dict' object has no attribute 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 24, in confirm_btn_click
    await cache.to_cache("language_locale", user_settings.language_locale)
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'language_locale'
[2025-04-27 15:43:13,244]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147730 by bot id=8059818753
AttributeError: 'dict' object has no attribute 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 24, in confirm_btn_click
    await cache.to_cache("language_locale", user_settings.language_locale)
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'language_locale'
[2025-04-27 15:43:13,244]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147730 by bot id=8059818753
AttributeError: 'dict' object has no attribute 'language_locale'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 24, in confirm_btn_click
    await cache.to_cache("language_locale", user_settings.language_locale)
                                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'dict' object has no attribute 'language_locale'
[2025-04-27 15:49:57,167]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147738 by bot id=8059818753
UnknownIntent: Context not found for intent id: 3l6it7
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: 3l6it7
[2025-04-27 15:49:57,167]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147738 by bot id=8059818753
UnknownIntent: Context not found for intent id: 3l6it7
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: 3l6it7
[2025-04-27 15:50:27,990]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147749 by bot id=8059818753
UnknownIntent: Context not found for intent id: XL4fC5
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: XL4fC5
[2025-04-27 15:50:27,990]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147749 by bot id=8059818753
UnknownIntent: Context not found for intent id: XL4fC5
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: XL4fC5
[2025-04-27 15:50:33,448]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147750 by bot id=8059818753
UnknownIntent: Context not found for intent id: XL4fC5
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: XL4fC5
[2025-04-27 15:50:33,448]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147750 by bot id=8059818753
UnknownIntent: Context not found for intent id: XL4fC5
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: XL4fC5
[2025-04-27 15:50:46,806]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147751 by bot id=8059818753
UnknownIntent: Context not found for intent id: XL4fC5
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: XL4fC5
[2025-04-27 15:50:46,806]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147751 by bot id=8059818753
UnknownIntent: Context not found for intent id: XL4fC5
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 397, in process_callback_query
    await self._load_context_by_intent(
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 240, in _load_context_by_intent
    context = await proxy.load_context(intent_id)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\storage.py", line 57, in load_context
    raise UnknownIntent(
aiogram_dialog.api.exceptions.UnknownIntent: Context not found for intent id: XL4fC5
[2025-04-29 16:02:05,647]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147784 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Value error, Field 'language' should be one of 'LocalesEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
dialog_type
  Value error, Field 'dialog' should be one of 'DialogsTypeEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 24, in on_confirm_back_btn_click
    new_user_setting = UserSettingsScheme(language_locale=actual_user_lang, dialog_type=actual_user_dialog)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Value error, Field 'language' should be one of 'LocalesEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
dialog_type
  Value error, Field 'dialog' should be one of 'DialogsTypeEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
[2025-04-29 16:02:05,647]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147784 by bot id=8059818753
ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Value error, Field 'language' should be one of 'LocalesEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
dialog_type
  Value error, Field 'dialog' should be one of 'DialogsTypeEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 24, in on_confirm_back_btn_click
    new_user_setting = UserSettingsScheme(language_locale=actual_user_lang, dialog_type=actual_user_dialog)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 2 validation errors for UserSettingsScheme
language_locale
  Value error, Field 'language' should be one of 'LocalesEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
dialog_type
  Value error, Field 'dialog' should be one of 'DialogsTypeEnum' [type=value_error, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/value_error
[2025-04-29 18:39:14,677]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-29 18:39:14,677]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-29 21:47:12,376]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147834 by bot id=8059818753
TypeError: UserRepository.__init__() got an unexpected keyword argument 'user_settings_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=settings, model=User,
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() got an unexpected keyword argument 'user_settings_repo'
[2025-04-29 21:47:12,376]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147834 by bot id=8059818753
TypeError: UserRepository.__init__() got an unexpected keyword argument 'user_settings_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=settings, model=User,
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() got an unexpected keyword argument 'user_settings_repo'
[2025-04-30 08:35:52,737]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147841 by bot id=8059818753
AttributeError: 'RabbitMQ' object has no attribute 'AMQP_DSN'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.AMQP_DSN))
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'RabbitMQ' object has no attribute 'AMQP_DSN'
[2025-04-30 08:35:52,737]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147841 by bot id=8059818753
AttributeError: 'RabbitMQ' object has no attribute 'AMQP_DSN'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.AMQP_DSN))
                                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'RabbitMQ' object has no attribute 'AMQP_DSN'
[2025-04-30 08:36:29,317]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147842 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:36:29,317]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147842 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:36:34,578]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147843 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:36:34,578]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147843 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:37:09,803]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147844 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:37:09,803]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147844 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:37:15,076]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147845 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:37:15,076]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147845 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:38:54,601]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147846 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:38:54,601]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147846 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:39:32,896]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147847 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:39:32,896]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147847 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:39:42,270]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147848 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:39:42,270]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147848 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:39:47,446]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147849 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:39:47,446]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147849 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:40:33,182]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147850 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:40:33,182]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147850 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:40:38,367]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147851 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:40:38,367]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147851 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:41:39,833]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147852 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:41:39,833]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147852 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:42:40,449]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147853 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:42:40,449]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147853 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:43:08,195]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147854 by bot id=8059818753
AttributeError: 'UserInfoDTO' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 44, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(user.settings.model_dump(exclude={"id"})).model_dump()
                                                      ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'UserInfoDTO' object has no attribute 'settings'
[2025-04-30 08:43:08,195]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147854 by bot id=8059818753
AttributeError: 'UserInfoDTO' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 44, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(user.settings.model_dump(exclude={"id"})).model_dump()
                                                      ^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 891, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'UserInfoDTO' object has no attribute 'settings'
[2025-04-30 08:44:53,028]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147855 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:44:53,028]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147855 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:47:15,076]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147856 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:47:15,076]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147856 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:47:20,293]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147857 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:47:20,293]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147857 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 35, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 21, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 18, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:48:01,819]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147858 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 22, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 19, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:48:01,819]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147858 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 22, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 19, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:49:29,218]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147859 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 22, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 19, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:49:29,218]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147859 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 22, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 19, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:57:56,175]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147862 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 22, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 19, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 08:57:56,175]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147862 by bot id=8059818753
AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 180, in get_frame
    fp.write(await self.reader.readexactly(1))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\asyncio\streams.py", line 750, in readexactly
    raise exceptions.IncompleteReadError(incomplete, n)
asyncio.exceptions.IncompleteReadError: 0 bytes read on a total of 1 expected bytes

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 26, in __call__
    await self.process_service.track_message(event.chat.id, event.message_id)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\delete_msg_service.py", line 17, in track_message
    await self.broker.publish_message(message)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 36, in publish_message
    channel = await self.get_broker_channel()
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 22, in get_broker_channel
    connection = await self.get_broker_connection()
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\RabbitMq.py", line 19, in get_broker_connection
    return await aiormq.connect(url=str(self.settings.rabbitmq.dsn.unicode_string()))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 920, in connect
    await connection.connect(client_properties or {})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\base.py", line 164, in wrap
    return await self.create_task(func(self, *args, **kwargs))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\abc.py", line 44, in __inner
    return await self.task
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 472, in connect
    _, _, frame = await frame_receiver.get_frame()
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiormq\connection.py", line 204, in get_frame
    raise AMQPConnectionError(
aiormq.exceptions.AMQPConnectionError: Server connection unexpectedly closed. Read 0 bytes but 1 bytes expected
[2025-04-30 09:39:55,639]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147881 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:39:55,639]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147881 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:40:46,888]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147886 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:40:46,888]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147886 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:41:41,387]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147888 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:41:41,387]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147888 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:41:59,650]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147890 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 09:41:59,650]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147890 by bot id=8059818753
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\callbacks.py", line 26, in on_confirm_back_btn_click
    await cache.to_cache(key=callback.from_user.id, value=new_user_setting.model_dump_json(), exp_time=20, shadow=True)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\services\cache_service.py", line 12, in to_cache
    print(await self.storage.get_all_values())
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 59, in get_all_values
    data[key] = await self.get_value(key=key)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\clients\Redis.py", line 51, in get_value
    data = await self.redis.get(key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 616, in execute_command
    return await conn.retry.call_with_retry(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\retry.py", line 59, in call_with_retry
    return await do()
           ^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 590, in _send_command_parse_response
    return await self.parse_response(conn, command_name, **options)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\client.py", line 637, in parse_response
    response = await connection.read_response()
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\asyncio\connection.py", line 549, in read_response
    response = await self._parser.read_response(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 82, in read_response
    response = await self._read_response(disable_decoding=disable_decoding)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\resp2.py", line 131, in _read_response
    response = self.encoder.decode(response)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\redis\_parsers\encoders.py", line 43, in decode
    value = value.decode(self.encoding, self.encoding_errors)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
UnicodeDecodeError: 'utf-8' codec can't decode byte 0x80 in position 0: invalid start byte
[2025-04-30 16:47:32,939]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-04-30 16:47:32,939]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ServerDisconnectedError: Server disconnected
[2025-04-30 18:07:10,949]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-30 18:07:10,949]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-04-30 18:07:11,967]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:11,967]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:13,308]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:13,308]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:14,950]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:14,950]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:17,103]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:17,103]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:19,928]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:19,928]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:23,736]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:23,736]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:28,640]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:28,640]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:33,700]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:33,700]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:38,690]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:38,690]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:43,702]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:43,702]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:48,968]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:48,968]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:54,009]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:54,009]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:59,083]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:07:59,083]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:03,981]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:03,981]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:08,868]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:08,868]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:13,696]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:13,696]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:18,684]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:18,684]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:23,775]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:23,775]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:28,871]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:28,871]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:34,086]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:34,086]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:39,176]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:39,176]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:44,102]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:44,102]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:49,235]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:49,235]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:54,187]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:54,187]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:59,109]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:08:59,109]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:03,962]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:03,962]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:09,038]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:09,038]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:14,104]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:14,104]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:19,086]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:19,086]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:24,031]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:24,031]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:28,979]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:28,979]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:33,945]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:33,945]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:38,932]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:38,932]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:43,891]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:43,891]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:48,992]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:48,992]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:53,983]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:53,983]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:58,991]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:09:58,991]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:03,856]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:03,856]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:09,030]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:09,030]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:14,110]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:14,110]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:19,137]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:19,137]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:24,102]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:24,102]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:29,185]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:29,185]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:33,933]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:33,933]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:39,173]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:39,173]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:44,205]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:44,205]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:49,357]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:49,357]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:54,388]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:54,388]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:59,420]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:10:59,420]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:04,317]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:04,317]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:09,337]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:09,337]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:14,371]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:14,371]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:19,251]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:19,251]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:24,132]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:24,132]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:29,217]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:29,217]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:34,172]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:34,172]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:39,304]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:39,304]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:44,263]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:44,263]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:49,149]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:49,149]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:54,253]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:54,253]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:59,260]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:11:59,260]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:04,441]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:04,441]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:09,421]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:09,421]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:14,417]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:14,417]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:19,521]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:19,521]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:24,373]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:24,373]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:29,498]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:29,498]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:34,386]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:34,386]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:39,514]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:39,514]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:44,656]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:44,656]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:49,627]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:49,627]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:54,785]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:54,785]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:59,741]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:12:59,741]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:04,719]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:04,719]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:09,747]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:09,747]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:14,730]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:14,730]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:19,869]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:19,869]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:25,045]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:25,045]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:29,974]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:29,974]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:34,801]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:34,801]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:39,801]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:39,801]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:44,771]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:44,771]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:49,769]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:49,769]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:54,747]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:54,747]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:59,763]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:13:59,763]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:04,744]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:04,744]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:09,701]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:09,701]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:14,678]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:14,678]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:19,812]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:19,812]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:24,834]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:24,834]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:29,780]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:29,780]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:34,791]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:34,791]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:39,915]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:39,915]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:44,986]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:44,986]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:49,944]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:49,944]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:55,031]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:14:55,031]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:00,017]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:00,017]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:05,110]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:05,110]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:10,057]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:10,057]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:15,077]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:15,077]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:20,124]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:20,124]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:25,070]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:25,070]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:29,982]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:29,982]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:34,947]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:34,947]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:39,966]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:39,966]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:45,116]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:45,116]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:50,256]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:50,256]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:55,270]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:15:55,270]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:00,290]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:00,290]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:05,232]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:05,232]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:10,329]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:10,329]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:15,237]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:15,237]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:20,330]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:20,330]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:25,173]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:25,173]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:30,119]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:30,119]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:35,179]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:35,179]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:40,039]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:40,039]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:44,975]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:44,975]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:49,982]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:49,982]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:54,987]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:16:54,987]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:00,001]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:00,001]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:04,909]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:04,909]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:09,899]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:09,899]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:14,906]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:14,906]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:20,133]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:20,133]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:25,129]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:25,129]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:30,077]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:30,077]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:35,021]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:35,021]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:39,960]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:39,960]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:45,078]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:45,078]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:50,027]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:50,027]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:55,153]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:17:55,153]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:00,349]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:00,349]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:05,597]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:05,597]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:10,730]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:10,730]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:15,746]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:15,746]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:20,681]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:20,681]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:25,726]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:25,726]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:30,877]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:30,877]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:35,907]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:35,907]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:40,954]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:40,954]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:45,845]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:45,845]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:50,816]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:50,816]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:55,880]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:18:55,880]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:00,948]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:00,948]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:06,129]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:06,129]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:11,016]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:11,016]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:16,004]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:16,004]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:21,158]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:21,158]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:26,116]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:26,116]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:31,218]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:31,218]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:36,267]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:36,267]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:41,347]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:41,347]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:46,549]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:46,549]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:51,596]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:51,596]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:56,596]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:19:56,596]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:01,471]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:01,471]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:06,143]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:06,143]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:11,049]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:11,049]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:16,173]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:16,173]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:21,347]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:21,347]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:26,337]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:26,337]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:31,497]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:31,497]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:36,667]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:36,667]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:41,455]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:41,455]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:46,432]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:46,432]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:51,464]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:51,464]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:56,403]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:20:56,403]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:01,356]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:01,356]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:06,336]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:06,336]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:11,352]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:11,352]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:16,416]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:16,416]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:21,508]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:21,508]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:26,557]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:26,557]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:31,561]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:31,561]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:36,627]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:36,627]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:41,607]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:41,607]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:46,462]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:46,462]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:51,471]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:51,471]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:56,529]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:21:56,529]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:01,558]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:01,558]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:06,710]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:06,710]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:11,876]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:11,876]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:16,920]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:16,920]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:21,863]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:21,863]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:26,994]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:26,994]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:32,048]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:32,048]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:37,101]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:37,101]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:42,199]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:42,199]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:47,288]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:47,288]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:52,216]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:52,216]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:57,408]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:22:57,408]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:02,513]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:02,513]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:07,514]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:07,514]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:12,664]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:12,664]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:17,775]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:17,775]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:22,772]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:22,772]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:27,902]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:27,902]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:33,050]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:33,050]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:38,229]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:38,229]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:43,302]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:43,302]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:48,209]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:48,209]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:53,273]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:53,273]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:58,102]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:23:58,102]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:02,944]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:02,944]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:07,655]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:07,655]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:12,617]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:12,617]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:17,776]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:17,776]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:22,900]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:22,900]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:27,978]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:27,978]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:32,886]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:32,886]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:37,922]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:37,922]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:42,895]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:42,895]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:47,969]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:47,969]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:53,044]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:53,044]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:57,908]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:24:57,908]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:02,811]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:02,811]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:07,863]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:07,863]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:12,946]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:12,946]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:18,012]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:18,012]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:23,046]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:23,046]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:28,264]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:28,264]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:33,352]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:33,352]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:38,465]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:38,465]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:43,433]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:43,433]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:48,476]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:48,476]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:53,528]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:53,528]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:58,410]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:25:58,410]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:03,446]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:03,446]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:08,331]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:08,331]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:13,371]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:13,371]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:18,472]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:18,472]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:23,560]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:23,560]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:28,619]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:28,619]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:33,659]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:33,659]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:38,757]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:38,757]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:43,919]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:43,919]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:49,009]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:49,009]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:54,062]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:54,062]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:59,114]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:26:59,114]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:04,168]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:04,168]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:09,281]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:09,281]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:14,340]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:14,340]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:19,301]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:19,301]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:24,300]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:24,300]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:29,242]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:29,242]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:34,104]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:34,104]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:39,305]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:39,305]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:44,507]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:44,507]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:49,311]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:49,311]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:54,394]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:54,394]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:59,316]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:27:59,316]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:04,218]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:04,218]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:09,169]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:09,169]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:13,988]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:13,988]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:19,042]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:19,042]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:23,926]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:23,926]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:28,947]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:28,947]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:33,957]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:33,957]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:38,863]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:38,863]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:43,996]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:43,996]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:48,951]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:48,951]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:53,967]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:53,967]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:58,951]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:28:58,951]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:04,089]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:04,089]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:09,130]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:09,130]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:14,199]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:14,199]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:19,393]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:19,393]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:24,462]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:24,462]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:29,528]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:29,528]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:34,458]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:34,458]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:39,421]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:39,421]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:44,351]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:44,351]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:49,460]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:49,460]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:54,659]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:54,659]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:59,704]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:29:59,704]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:04,529]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:04,529]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:09,533]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:09,533]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:14,320]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:14,320]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:19,450]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:19,450]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:24,569]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:24,569]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:29,719]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:29,719]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:34,724]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:34,724]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:39,648]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:39,648]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:44,747]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:44,747]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:49,596]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:49,596]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:54,641]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:54,641]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:59,689]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:30:59,689]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:04,757]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:04,757]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:09,745]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:09,745]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:14,738]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:14,738]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:19,816]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:19,816]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:24,886]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:24,886]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorError: Cannot connect to host api.telegram.org:443 ssl:default [  .            Windows]
[2025-04-30 18:31:29,719]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:29,719]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:34,832]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:34,832]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:39,777]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:39,777]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:44,739]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 18:31:44,739]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientConnectorDNSError: Cannot connect to host api.telegram.org:443 ssl:default [getaddrinfo failed]
[2025-04-30 19:26:35,786]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-04-30 19:26:35,786]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-01 10:24:07,225]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147992 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 44, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(user.model_dump(exclude={"id"})).model_dump()
                                                      ^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'model_dump'
[2025-05-01 10:24:07,225]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52147992 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'model_dump'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 44, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 44, in settings_process_handler
    user_settings = UserSettingsScheme.model_validate(user.model_dump(exclude={"id"})).model_dump()
                                                      ^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'model_dump'
[2025-05-01 12:02:34,135]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148041 by bot id=8059818753
TypeError: UserRepository.__init__() missing 1 required positional argument: 'db_session'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 42, in __call__
    data["usr_repo"] = UserRepository(settings=user_settings, info=user_info)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() missing 1 required positional argument: 'db_session'
[2025-05-01 12:02:34,135]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148041 by bot id=8059818753
TypeError: UserRepository.__init__() missing 1 required positional argument: 'db_session'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 28, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 42, in __call__
    data["usr_repo"] = UserRepository(settings=user_settings, info=user_info)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() missing 1 required positional argument: 'db_session'
[2025-05-01 12:02:54,257]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-01 12:02:54,257]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-01 12:07:21,036]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148043 by bot id=8059818753
TypeError: Session.__init__() got an unexpected keyword argument 'echo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 24, in __call__
    async with self.db_session(expire_on_commit=False) as session:
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1773, in __call__
    return self.class_(**local_kw)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 272, in __init__
    self.sync_session_class(bind=sync_bind, binds=sync_binds, **kw)
TypeError: Session.__init__() got an unexpected keyword argument 'echo'
[2025-05-01 12:07:21,036]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148043 by bot id=8059818753
TypeError: Session.__init__() got an unexpected keyword argument 'echo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 24, in __call__
    async with self.db_session(expire_on_commit=False) as session:
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 1773, in __call__
    return self.class_(**local_kw)
           ^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 272, in __init__
    self.sync_session_class(bind=sync_bind, binds=sync_binds, **kw)
TypeError: Session.__init__() got an unexpected keyword argument 'echo'
[2025-05-01 12:11:44,932]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148046 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 116, in add_user
    data = await self.settings.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:11:44,932]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148046 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 43, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 116, in add_user
    data = await self.settings.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:31:19,098]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148047 by bot id=8059818753
TypeError: UserRepository.__init__() got an unexpected keyword argument 'info'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=user_settings, info=user_info)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() got an unexpected keyword argument 'info'
[2025-05-01 12:31:19,098]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148047 by bot id=8059818753
TypeError: UserRepository.__init__() got an unexpected keyword argument 'info'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 41, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=user_settings, info=user_info)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() got an unexpected keyword argument 'info'
[2025-05-01 12:32:02,021]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148048 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 117, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:32:02,021]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148048 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 117, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:33:18,089]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148049 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 117, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:33:18,089]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148049 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 117, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:35:29,334]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148050 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 117, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:35:29,334]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148050 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 117, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:40:01,443]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148051 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 119, in add_user
    await self.config.add_user_settings(1234567890, language="fu")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:40:01,443]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148051 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 119, in add_user
    await self.config.add_user_settings(1234567890, language="fu")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:40:14,875]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148052 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 119, in add_user
    await self.config.add_user_settings(1234567890, language="fu")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:40:14,875]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148052 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 119, in add_user
    await self.config.add_user_settings(1234567890, language="fu")
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:41:49,542]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148053 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 121, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:41:49,542]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148053 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 121, in add_user
    data = await self.config.add_user_settings(1234567890, language="fu")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 30, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:52:19,512]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148055 by bot id=8059818753
TypeError: UserRepository.__init__() missing 1 required positional argument: 'info'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 42, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=settings)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() missing 1 required positional argument: 'info'
[2025-05-01 12:52:19,512]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148055 by bot id=8059818753
TypeError: UserRepository.__init__() missing 1 required positional argument: 'info'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 42, in __call__
    data["usr_repo"] = UserRepository(db_session=db_session, settings=settings)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: UserRepository.__init__() missing 1 required positional argument: 'info'
[2025-05-01 12:52:43,779]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148056 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 118, in add_user
    data = await self.settings.add_user_settings(1234567890, language="re")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 29, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 12:52:43,779]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148056 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 118, in add_user
    data = await self.settings.add_user_settings(1234567890, language="re")
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 29, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 21:23:23,580]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148083 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 122, in add_user
    data = await self.settings.add_user_settings(1234567890, language="re", with_commit=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 34, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 21:23:23,580]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148083 by bot id=8059818753
TypeError: field language_locale should be a LocalEnum names
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 24, in welcome_getter
    await usr_repo.add_user(user_id=message.from_user.id, language=getattr(LocalesEnum, language))
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 122, in add_user
    data = await self.settings.add_user_settings(1234567890, language="re", with_commit=False)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\repositories\users.py", line 34, in add_user_settings
    **UserSettingsCreateScheme(
      ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 214, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\schemes\models\users.py", line 21, in validate_language
    raise TypeError("field language_locale should be a LocalEnum names")
TypeError: field language_locale should be a LocalEnum names
[2025-05-01 22:12:06,632]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148095 by bot id=8059818753
IndexError: list index out of range
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 17, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 29, in _get_file_descriptor
    return [element.file_id for element in telegram_file_type][2]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: list index out of range
[2025-05-01 22:12:06,632]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148095 by bot id=8059818753
IndexError: list index out of range
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 17, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 29, in _get_file_descriptor
    return [element.file_id for element in telegram_file_type][2]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: list index out of range
[2025-05-01 22:15:11,043]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148101 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:15:11,043]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148101 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:15:31,822]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148102 by bot id=8059818753
TypeError: dialogs_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: dialogs_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:15:31,822]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148102 by bot id=8059818753
TypeError: dialogs_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: dialogs_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:18:58,522]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148104 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 53, in languages_getter
    message = i18n.settings.labels.locale_type()
              ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'settings'
[2025-05-01 22:18:58,522]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148104 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'settings'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 53, in languages_getter
    message = i18n.settings.labels.locale_type()
              ^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'settings'
[2025-05-01 22:19:12,143]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148106 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:19:12,143]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148106 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:21:52,826]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148110 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:21:52,826]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148110 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:28:00,455]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148114 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 22:28:00,455]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148114 by bot id=8059818753
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() missing 1 required positional argument: 'i18n'
[2025-05-01 23:02:22,285]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-05-01 23:02:22,285]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - Request timeout error
[2025-05-02 18:46:46,737]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148135 by bot id=8059818753
IndexError: list index out of range
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 17, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 29, in _get_file_descriptor
    return [element.file_id for element in telegram_file_type][2]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: list index out of range
[2025-05-02 18:46:46,737]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148135 by bot id=8059818753
IndexError: list index out of range
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 17, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 29, in _get_file_descriptor
    return [element.file_id for element in telegram_file_type][2]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: list index out of range
[2025-05-02 18:48:03,276]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148136 by bot id=8059818753
IndexError: list index out of range
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 17, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 29, in _get_file_descriptor
    return [element.file_id for element in telegram_file_type][2]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: list index out of range
[2025-05-02 18:48:03,276]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148136 by bot id=8059818753
IndexError: list index out of range
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 17, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 29, in _get_file_descriptor
    return [element.file_id for element in telegram_file_type][2]
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^
IndexError: list index out of range
[2025-05-02 18:49:33,384]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148137 by bot id=8059818753
TypeError: Object of type PhotoSize is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 30, in _get_file_descriptor
    print(json.dumps(telegram_file_type, indent=3))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 430, in _iterencode
    yield from _iterencode_list(o, _current_indent_level)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type PhotoSize is not JSON serializable
[2025-05-02 18:49:33,384]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148137 by bot id=8059818753
TypeError: Object of type PhotoSize is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 30, in _get_file_descriptor
    print(json.dumps(telegram_file_type, indent=3))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 430, in _iterencode
    yield from _iterencode_list(o, _current_indent_level)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type PhotoSize is not JSON serializable
[2025-05-02 18:50:15,865]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148138 by bot id=8059818753
TypeError: Object of type PhotoSize is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 31, in _get_file_descriptor
    print(json.dumps(telegram_file_type, indent=3))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 430, in _iterencode
    yield from _iterencode_list(o, _current_indent_level)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type PhotoSize is not JSON serializable
[2025-05-02 18:50:15,865]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148138 by bot id=8059818753
TypeError: Object of type PhotoSize is not JSON serializable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 31, in _get_file_descriptor
    print(json.dumps(telegram_file_type, indent=3))
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\__init__.py", line 238, in dumps
    **kw).encode(obj)
          ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 202, in encode
    chunks = list(chunks)
             ^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 430, in _iterencode
    yield from _iterencode_list(o, _current_indent_level)
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 326, in _iterencode_list
    yield from chunks
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 439, in _iterencode
    o = _default(o)
        ^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\json\encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
TypeError: Object of type PhotoSize is not JSON serializable
[2025-05-02 18:51:05,447]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148139 by bot id=8059818753
AttributeError: 'list' object has no attribute 'file_id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 34, in _get_file_descriptor
    if getattr(telegram_file_type, "file_id"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'file_id'
[2025-05-02 18:51:05,447]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148139 by bot id=8059818753
AttributeError: 'list' object has no attribute 'file_id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 34, in _get_file_descriptor
    if getattr(telegram_file_type, "file_id"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'file_id'
[2025-05-02 18:51:52,485]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148140 by bot id=8059818753
AttributeError: 'list' object has no attribute 'file_id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 34, in _get_file_descriptor
    if getattr(telegram_file_type, "file_id"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'file_id'
[2025-05-02 18:51:52,485]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148140 by bot id=8059818753
AttributeError: 'list' object has no attribute 'file_id'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 17, in validate_message_type
    file_meta: FileMeta = get_file_from_message(message)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 18, in get_file_from_message
    file = _get_file_descriptor(message.photo)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\inspections.py", line 34, in _get_file_descriptor
    if getattr(telegram_file_type, "file_id"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'list' object has no attribute 'file_id'
[2025-05-02 18:57:51,025]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148144 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 35, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 18:57:51,025]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148144 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 35, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 18:58:55,313]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148148 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 36, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 18:58:55,313]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148148 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 36, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 19:03:44,883]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-02 19:03:44,883]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-02 19:09:25,888]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148178 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 36, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 19:09:25,888]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148178 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 36, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 19:10:54,839]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148191 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 36, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 19:10:54,839]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148191 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 36, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 20:52:44,691]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148220 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 40, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 20:52:44,691]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148220 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'title'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\dialog_pre_handlers.py", line 40, in validate_meme_title
    valid_key = ((clean_title := message.text.title()) + file.name.suffix)
                                 ^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'title'
[2025-05-02 20:57:43,516]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148232 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 20:57:43,516]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148232 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 20:59:29,974]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148235 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 20:59:29,974]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148235 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:00:31,050]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148240 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:00:31,050]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148240 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:03:14,217]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148244 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:03:14,217]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148244 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:09:32,945]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148246 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:09:32,945]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148246 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:19:01,244]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148247 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 21:19:01,244]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148247 by bot id=8059818753
TypeError: 'coroutine' object is not callable
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: 'coroutine' object is not callable
[2025-05-02 22:14:46,621]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148248 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 20, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 43, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-02 22:14:46,621]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148248 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 20, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 43, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-02 22:16:21,546]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148249 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 18, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:16:21,546]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148249 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 18, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:17:13,509]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148250 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:17:13,509]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148250 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:17:44,690]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148251 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:17:44,690]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148251 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:29:01,179]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148252 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:29:01,179]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148252 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:29:40,521]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148253 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:29:40,521]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148253 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:30:24,691]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148254 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 22:30:24,691]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148254 by bot id=8059818753
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 19, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 3 required positional arguments: 'bot', 'obj_service', and 'file_repo'
[2025-05-02 23:21:38,580]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148256 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 22, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-02 23:21:38,580]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148256 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 22, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-02 23:22:22,817]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148257 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 22, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-02 23:22:22,817]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148257 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 22, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 09:12:37,270]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148258 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 09:12:37,270]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148258 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 09:37:04,455]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148259 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:37:04,455]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148259 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:39:27,880]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148261 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:39:27,880]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148261 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:40:15,736]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148263 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 36, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 09:40:15,736]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148263 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 36, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 09:40:49,894]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148265 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 20, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 09:40:49,894]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148265 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 20, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 09:41:53,707]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148267 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 26, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 09:41:53,707]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148267 by bot id=8059818753
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 26, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: validate_meme_title() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 09:51:08,791]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148270 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:51:08,791]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148270 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:56:38,788]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148274 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 09:56:38,788]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148274 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 10:00:34,127]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148277 by bot id=8059818753
TypeError: issubclass() arg 1 must be a class
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in _find_dialog_manager
    if issubclass(i, DialogManager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\typing.py", line 1833, in __subclasscheck__
    raise TypeError('issubclass() arg 1 must be a class')
TypeError: issubclass() arg 1 must be a class
[2025-05-03 10:00:34,127]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148277 by bot id=8059818753
TypeError: issubclass() arg 1 must be a class
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in _find_dialog_manager
    if issubclass(i, DialogManager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\typing.py", line 1833, in __subclasscheck__
    raise TypeError('issubclass() arg 1 must be a class')
TypeError: issubclass() arg 1 must be a class
[2025-05-03 10:01:01,401]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148280 by bot id=8059818753
TypeError: issubclass() arg 1 must be a class
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in _find_dialog_manager
    if issubclass(i, ManagerImpl):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\typing.py", line 1847, in __subclasscheck__
    return super().__subclasscheck__(other)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen abc>", line 123, in __subclasscheck__
TypeError: issubclass() arg 1 must be a class
[2025-05-03 10:01:01,401]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148280 by bot id=8059818753
TypeError: issubclass() arg 1 must be a class
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in _find_dialog_manager
    if issubclass(i, ManagerImpl):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\HP\AppData\Local\Programs\Python\Python312\Lib\typing.py", line 1847, in __subclasscheck__
    return super().__subclasscheck__(other)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen abc>", line 123, in __subclasscheck__
TypeError: issubclass() arg 1 must be a class
[2025-05-03 10:05:34,585]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148284 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 10:05:34,585]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148284 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 10:09:56,487]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148288 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in _find_dialog_manager
    if getattr(i, "middleware_data") and getattr(i, "start_data"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 10:09:56,487]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148288 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in _find_dialog_manager
    if getattr(i, "middleware_data") and getattr(i, "start_data"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 10:10:35,784]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148291 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 10:10:35,784]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148291 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 10:12:13,965]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148293 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 10:12:13,965]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148293 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 25, in wrapper
    print("MANAGER", dialog_manager.middleware_data)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 10:12:59,202]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148294 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in _find_dialog_manager
    if getattr(i, "middleware_data") and getattr(i, "start_data"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 10:12:59,202]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148294 by bot id=8059818753
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 883, in __getattr__
    return pydantic_extra[item]
           ~~~~~~~~~~~~~~^^^^^^
KeyError: 'middleware_data'

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 131, in _message_handler
    processed = await window.process_message(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 125, in process_message
    return await self.on_message.process_message(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\input\base.py", line 66, in process_message
    await self.func.process_event(message, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 24, in wrapper
    dialog_manager = self._find_dialog_manager(args)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in _find_dialog_manager
    if getattr(i, "middleware_data") and getattr(i, "start_data"):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 885, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}') from exc
AttributeError: 'CustomMessageUpdate' object has no attribute 'middleware_data'
[2025-05-03 10:26:01,407]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-03 10:26:01,407]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-03 10:48:23,524]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148316 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'get_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in _find_args_in_data
    arg = managed_radio.get_checked()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_checked'
[2025-05-03 10:48:23,524]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148316 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'get_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in _find_args_in_data
    arg = managed_radio.get_checked()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_checked'
[2025-05-03 10:48:43,335]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148320 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'get_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in _find_args_in_data
    arg = managed_radio.get_checked()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_checked'
[2025-05-03 10:48:43,335]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148320 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'get_checked'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 149, in _callback_handler
    processed = await window.process_callback(
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 135, in process_callback
    return await self.keyboard.process_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 81, in process_callback
    return await self._process_other_callback(callback, dialog, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\group.py", line 76, in _process_other_callback
    if await b.process_callback(callback, dialog, manager):
       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\base.py", line 68, in process_callback
    return await self._process_own_callback(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\kbd\button.py", line 38, in _process_own_callback
    await self.on_click.process_event(callback, self, manager)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\widget_event.py", line 35, in process_event
    await self.callback(event, source, manager, *args, **kwargs)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 23, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in _find_args_in_data
    arg = managed_radio.get_checked()
          ^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'get_checked'
[2025-05-03 11:30:08,795]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148328 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 29, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 40, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 11:30:08,795]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148328 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 29, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 40, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 11:31:49,304]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148329 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 29, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 41, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 11:31:49,304]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148329 by bot id=8059818753
AttributeError: 'tuple' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 29, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 41, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'tuple' object has no attribute 'middleware_data'
[2025-05-03 11:36:39,509]: [ wrappers   ][ (func name: _find_dialog_manager line 53  ) ] #ERROR : root                 -  DialogManager not found on decorated function
[2025-05-03 11:36:39,511]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148330 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 30, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 42, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:36:39,511]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148330 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 30, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 42, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:37:38,686]: [ wrappers   ][ (func name: _find_dialog_manager line 56  ) ] #ERROR : root                 -  DialogManager not found on decorated function
[2025-05-03 11:37:38,687]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148331 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 34, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 46, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:37:38,687]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148331 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 34, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 46, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:39:23,039]: [ wrappers   ][ (func name: _find_dialog_manager line 56  ) ] #ERROR : root                 -  DialogManager not found on decorated function
[2025-05-03 11:39:23,041]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148332 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 34, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 46, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:39:23,041]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148332 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 34, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 46, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:39:45,559]: [ wrappers   ][ (func name: _find_dialog_manager line 56  ) ] #ERROR : root                 -  DialogManager not found on decorated function
[2025-05-03 11:39:45,560]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148333 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 34, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 46, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:39:45,560]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148333 by bot id=8059818753
AttributeError: 'NoneType' object has no attribute 'middleware_data'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 34, in wrapper
    _extra_data = self._find_args_in_data(dialog_manager=dialog_manager)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 46, in _find_args_in_data
    arg = dialog_manager.middleware_data.get(element)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: 'NoneType' object has no attribute 'middleware_data'
[2025-05-03 11:40:42,094]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148334 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
[2025-05-03 11:40:42,094]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148334 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
[2025-05-03 11:42:18,747]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148335 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
[2025-05-03 11:42:18,747]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148335 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
[2025-05-03 11:46:06,725]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148336 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
[2025-05-03 11:46:06,725]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148336 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
[2025-05-03 11:46:25,490]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148337 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in wrapper
    return await func(*args, **_extra_data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:46:25,490]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148337 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 37, in wrapper
    return await func(*args, **_extra_data)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:47:26,855]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148338 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 38, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
[2025-05-03 11:47:26,855]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148338 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 38, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument '_translator'
[2025-05-03 11:48:29,121]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148339 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 39, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
[2025-05-03 11:48:29,121]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148339 by bot id=8059818753
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 39, in wrapper
    return await func(*args, **_extra_data, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: dialogs.default_mode.getters.languages_getter() got multiple values for keyword argument 'dialog_manager'
[2025-05-03 11:50:57,301]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148340 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 40, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:50:57,301]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148340 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 40, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:51:18,442]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148341 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 40, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:51:18,442]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148341 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 40, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:52:03,669]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148342 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:52:03,669]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148342 by bot id=8059818753
TypeError: languages_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() got an unexpected keyword argument 'bot'
[2025-05-03 11:58:46,704]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148343 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 42, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'radio_lang'
[2025-05-03 11:58:46,704]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148343 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 42, in wrapper
    return await func(*args, **kwargs)
                 ^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'radio_lang'
[2025-05-03 12:06:40,814]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148344 by bot id=8059818753
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
[2025-05-03 12:06:40,814]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148344 by bot id=8059818753
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
[2025-05-03 12:07:14,490]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148345 by bot id=8059818753
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
[2025-05-03 12:07:14,490]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148345 by bot id=8059818753
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
[2025-05-03 12:07:39,734]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148346 by bot id=8059818753
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
[2025-05-03 12:07:39,734]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148346 by bot id=8059818753
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 3 required positional arguments: 'dialog_manager', '_translator', and 'radio_lang'
[2025-05-03 12:08:30,209]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-03 12:08:30,209]: [ dispatcher ][ (func name: _listen_updates line 219 ) ] #ERROR : aiogram.dispatcher   -  Failed to fetch updates - TelegramNetworkError: HTTP Client says - ClientOSError: [Errno 1] [SSL: APPLICATION_DATA_AFTER_CLOSE_NOTIFY] application data after close notify (_ssl.c:2685)
[2025-05-03 12:08:36,296]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148347 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 12:08:36,296]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148347 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 44, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 12:11:04,086]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148349 by bot id=8059818753
TypeError: settings_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() got an unexpected keyword argument 'bot'
[2025-05-03 12:11:04,086]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148349 by bot id=8059818753
TypeError: settings_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() got an unexpected keyword argument 'bot'
[2025-05-03 12:11:11,036]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148350 by bot id=8059818753
TypeError: settings_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 53, in settings_process_handler
    await dialog_manager.start(SettingsStates.edit_settings, data={"user_settings": user_settings})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() got an unexpected keyword argument 'bot'
[2025-05-03 12:11:11,036]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148350 by bot id=8059818753
TypeError: settings_getter() got an unexpected keyword argument 'bot'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 331, in process_message
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\track_msg.py", line 25, in __call__
    handler = await handler(custom_message, data)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\i18n.py", line 20, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\handlers.py", line 53, in settings_process_handler
    await dialog_manager.start(SettingsStates.edit_settings, data={"user_settings": user_settings})
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 241, in start
    await self._start_normal(state, data, access_settings)
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 302, in _start_normal
    await self.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
                 ^^^^^^^^^^^^^^^^^^^
TypeError: settings_getter() got an unexpected keyword argument 'bot'
[2025-05-03 12:12:19,536]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148352 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 12:12:19,536]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148352 by bot id=8059818753
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 45, in wrapper
    return await func(*args, **valid_params)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: languages_getter() missing 1 required positional argument: 'dialog_manager'
[2025-05-03 12:20:54,002]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148368 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:20:54,002]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148368 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:22:24,862]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148369 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:22:24,862]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148369 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:22:44,727]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148370 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:22:44,727]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148370 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:23:08,626]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148371 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
[2025-05-03 12:23:08,626]: [ dispatcher ][ (func name: _process_update line 315 ) ] #ERROR : aiogram.event        -  Cause exception while process update id=52148371 by bot id=8059818753
ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
Traceback (most recent call last):
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 309, in _process_update
    response = await self.feed_update(bot, update, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 158, in feed_update
    response = await self.update.wrap_outer_middleware(
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\error.py", line 25, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\middlewares\user_context.py", line 56, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\fsm\middleware.py", line 42, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 27, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\middlewares\storage.py", line 45, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\dispatcher.py", line 276, in _listen_update
    return await self.propagate_event(update_type=update_type, event=event, **kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 409, in process_callback_query
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 437, in context_unlocker_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 80, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 174, in _propagate_event
    response = await router.propagate_event(update_type=update_type, event=event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 146, in propagate_event
    return await observer.wrap_outer_middleware(_wrapped, event=event, data=kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 141, in _wrapped
    return await self._propagate_event(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\router.py", line 166, in _propagate_event
    response = await observer.trigger(event, **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\telegram.py", line 121, in trigger
    return await wrapped_inner(event, kwargs)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager_middleware.py", line 55, in __call__
    return await handler(event, data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\context\intent_middleware.py", line 426, in context_saver_middleware
    result = await handler(event, data)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram\dispatcher\event\handler.py", line 43, in call
    return await wrapped()
           ^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 155, in _callback_handler
    await dialog_manager.show()
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\manager\manager.py", line 363, in show
    new_message = await self.dialog().render(self)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\dialog.py", line 123, in render
    return await window.render(self, manager)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 153, in render
    current_data = await self.load_data(dialog, manager)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\window.py", line 117, in load_data
    data.update(await self.getter(**manager.middleware_data))
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\aiogram_dialog\widgets\data\data_context.py", line 35, in __call__
    return await self.normal_getter(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\utils\wrappers.py", line 35, in wrapper
    return await func(*args, **valid_params)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\dialogs\default_mode\getters.py", line 38, in settings_getter
    settings: UserSettingsScheme = UserSettingsScheme.model_validate(user_settings)
                                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\PyCharm\PythonProjects\Stepik TeleBot\TeleBot XaBaYaBa v3\.venv\Lib\site-packages\pydantic\main.py", line 627, in model_validate
    return cls.__pydantic_validator__.validate_python(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for UserSettingsScheme
  Input should be a valid dictionary or instance of UserSettingsScheme [type=model_type, input_value=None, input_type=NoneType]
    For further information visit https://errors.pydantic.dev/2.10/v/model_type
